

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; ImagingReso 0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="ImagingReso 0 documentation" href="index.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> ImagingReso
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#initialization">Initialization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example">example:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#modify-isotopic-ratio">Modify Isotopic Ratio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#display-current-isotopic-ratio">Display current isotopic ratio</a></li>
<li class="toctree-l3"><a class="reference internal" href="#define-new-set-of-isotopic-ratio">Define new set of isotopic ratio</a></li>
<li class="toctree-l3"><a class="reference internal" href="#retrieve-the-transmission-and-attenuation-signals">Retrieve the Transmission and Attenuation signals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#display-transmission-and-attenuation">Display Transmission and Attenuation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#x-axis-unit-convertor">x-axis unit convertor</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ImagingReso</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>In a first time, you need to install the library</p>
<p>$ pip install ImagingReso</p>
<p>then you need to import it</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ImagingReso</span>
</pre></div>
</div>
<div class="section" id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h2>
<p>we first define our stack of elements. Each layer of the stack can be a single element, or a compound and
is defined by a dictionary  where the
thickness is defined in mm, the density in g/cm3 and the ratio is the stochiometric coefficient of each element.</p>
<div class="section" id="example">
<h3>example:<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">_stack</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;CoAg&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;elements&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Co&#39;</span><span class="p">,</span><span class="s1">&#39;Ag&#39;</span><span class="p">],</span>
<span class="go">                       &#39;stoichiometric_ratio&#39;: [1,1],</span>
<span class="go">                       &#39;thickness&#39;: {&#39;value&#39;: 0.025,</span>
<span class="go">                                     &#39;units&#39;: &#39;mm&#39;},</span>
<span class="go">                       &#39;density&#39;: {&#39;value&#39;: 0.5,</span>
<span class="go">                                   &#39;units&#39;: &#39;g/cm3&#39;},</span>
<span class="go">                       },</span>
<span class="go">              &#39;U&#39;: {&#39;elements&#39;: [&#39;U&#39;],</span>
<span class="go">                    &#39;stoichiometric_ratio&#39;: [1],</span>
<span class="go">                    &#39;thickness&#39;: {&#39;value&#39;: 0.3,</span>
<span class="go">                                  &#39;units&#39;: &#39;mm&#39;},</span>
<span class="go">                    &#39;density&#39;: {&#39;value&#39;: np.NaN,</span>
<span class="go">                                &#39;units&#39;: &#39;g/cm3&#39;},</span>
<span class="go">                   },</span>
<span class="go">             }</span>
</pre></div>
</div>
<p>Then you can now initialize the object as followed, in this case we use a energy range of 0 to 300 eV with
10 eV of energy step.</p>
<p>As noted that if the density is omitted, the program will use the stochiometri_ratio and theoretical density of each element to
estimage the density of the compound (layer), and changing the isotope density, or isotopic coefficient will affect the layer/compound density.
But if you provide the density, this value won’t be affected by any other changes. If you provide the density, we suppose that you
know what you are doing and that you know your component enough to make sure its density value should not be changed.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span> <span class="o">=</span> <span class="n">ImagingReso</span><span class="o">.</span><span class="n">Resonance</span><span class="p">(</span><span class="n">stack</span> <span class="o">=</span> <span class="n">_stack</span><span class="p">,</span> <span class="n">energy_min</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span> <span class="n">energy_max</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">energy_step</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>It is also possible to define the layers (stack) one by one using their formula as demonstrated here</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span> <span class="o">=</span> <span class="n">ImagingReso</span><span class="o">.</span><span class="n">Resonance</span><span class="p">(</span><span class="n">energy_min</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span> <span class="n">energy_max</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">energy_step</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack1</span> <span class="o">=</span> <span class="s1">&#39;CoAg&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thickness1</span> <span class="o">=</span> <span class="mf">0.025</span> <span class="c1">#mm</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">density1</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="c1">#g/cm3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">formula</span><span class="o">=</span><span class="n">stack1</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="n">thickness1</span><span class="p">,</span> <span class="n">density</span><span class="o">=</span><span class="n">density1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack2</span> <span class="o">=</span> <span class="s1">&#39;U&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">thcikness2</span> <span class="o">=</span> <span class="mf">0.3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">formula</span><span class="o">=</span><span class="n">stack2</span><span class="p">,</span> <span class="n">thcikness</span><span class="o">=</span><span class="n">thickness2</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>All the parameters defined can be checked as followed</strong></p>
<p>The list of stack displays the input information, but also reported the list of isotopes, mass, etc, for
the elements you defined, for each layer.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pprint</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">slack</span><span class="p">)</span>
<span class="go">{&#39;CoAg&#39;: {&#39;Ag&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 10.5},</span>
<span class="go">                 &#39;isotopes&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;,</span>
<span class="go">                                          &#39;value&#39;: [10.406250187729098,</span>
<span class="go">                                                    10.600899412431097]},</span>
<span class="go">                              &#39;file_names&#39;: [&#39;Ag-107.csv&#39;, &#39;Ag-109.csv&#39;],</span>
<span class="go">                              &#39;isotopic_ratio&#39;: [0.51839, 0.48161000000000004],</span>
<span class="go">                              &#39;list&#39;: [&#39;107-Ag&#39;, &#39;109-Ag&#39;],</span>
<span class="go">                              &#39;mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;,</span>
<span class="go">                                       &#39;value&#39;: [106.905093, 108.904756]}},</span>
<span class="go">                 &#39;molar_mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;, &#39;value&#39;: 107.8682}},</span>
<span class="go">          &#39;Co&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 8.9},</span>
<span class="go">                 &#39;isotopes&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;,</span>
<span class="go">                                          &#39;value&#39;: [8.749367803547068,</span>
<span class="go">                                                    8.900000030203689]},</span>
<span class="go">                              &#39;file_names&#39;: [&#39;Co-58.csv&#39;, &#39;Co-59.csv&#39;],</span>
<span class="go">                              &#39;isotopic_ratio&#39;: [0.0, 1.0],</span>
<span class="go">                              &#39;list&#39;: [&#39;58-Co&#39;, &#39;59-Co&#39;],</span>
<span class="go">                              &#39;mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;,</span>
<span class="go">                                       &#39;value&#39;: [57.9357576, 58.9332002]}},</span>
<span class="go">                 &#39;molar_mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;, &#39;value&#39;: 58.9332}},</span>
<span class="go">          &#39;atoms_per_cm3&#39;: {&#39;Ag&#39;: 1.8051829472054791e+21,</span>
<span class="go">                            &#39;Co&#39;: 1.8051829472054791e+21},</span>
<span class="go">          &#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 0.5},</span>
<span class="go">          &#39;elements&#39;: [&#39;Co&#39;, &#39;Ag&#39;],</span>
<span class="go">          &#39;stoichiometric_ratio&#39;: [1, 1],</span>
<span class="go">          &#39;thickness&#39;: {&#39;units&#39;: &#39;mm&#39;, &#39;value&#39;: 0.025}},</span>
<span class="go"> &#39;U&#39;: {&#39;U&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 18.95},</span>
<span class="go">             &#39;isotopes&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;,</span>
<span class="go">                                      &#39;value&#39;: [18.552792392319066,</span>
<span class="go">                                                18.632509467526443,</span>
<span class="go">                                                18.712358690988417,</span>
<span class="go">                                                18.951741325328925]},</span>
<span class="go">                          &#39;file_names&#39;: [&#39;U-233.csv&#39;,</span>
<span class="go">                                         &#39;U-234.csv&#39;,</span>
<span class="go">                                         &#39;U-235.csv&#39;,</span>
<span class="go">                                         &#39;U-238.csv&#39;],</span>
<span class="go">                          &#39;isotopic_ratio&#39;: [0.0,</span>
<span class="go">                                             5.4999999999999995e-05,</span>
<span class="go">                                             0.0072,</span>
<span class="go">                                             0.992745],</span>
<span class="go">                          &#39;list&#39;: [&#39;233-U&#39;, &#39;234-U&#39;, &#39;235-U&#39;, &#39;238-U&#39;],</span>
<span class="go">                          &#39;mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;,</span>
<span class="go">                                   &#39;value&#39;: [233.039628,</span>
<span class="go">                                             234.0409456,</span>
<span class="go">                                             235.0439231,</span>
<span class="go">                                             238.0507826]}},</span>
<span class="go">             &#39;molar_mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;, &#39;value&#39;: 238.02891}},</span>
<span class="go">       &#39;atoms_per_cm3&#39;: {&#39;U&#39;: 4.7943575106128917e+22},</span>
<span class="go">       &#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 18.949999999999999},</span>
<span class="go">       &#39;elements&#39;: [&#39;U&#39;],</span>
<span class="go">       &#39;stoichiometric_ratio&#39;: [1],</span>
<span class="go">       &#39;thickness&#39;: {&#39;units&#39;: &#39;mm&#39;, &#39;value&#39;: 0.3}}}</span>
</pre></div>
</div>
<p>or you can also simply print the object</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">o_reso</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    &quot;CoAg&quot;: {</span>
<span class="go">        &quot;elements&quot;: [</span>
<span class="go">            &quot;Co&quot;,</span>
<span class="go">            &quot;Ag&quot;</span>
<span class="go">        ],</span>
<span class="go">        &quot;stoichiometric_ratio&quot;: [</span>
<span class="go">            1,</span>
<span class="go">            1</span>
<span class="go">        ],</span>
<span class="go">   ...</span>
<span class="go">}</span>
</pre></div>
</div>
<p>or using only the object name</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span>
<span class="go">{</span>
<span class="go">    &quot;CoAg&quot;: {</span>
<span class="go">        &quot;elements&quot;: [</span>
<span class="go">            &quot;Co&quot;,</span>
<span class="go">            &quot;Ag&quot;</span>
<span class="go">        ],</span>
<span class="go">        &quot;stoichiometric_ratio&quot;: [</span>
<span class="go">            1,</span>
<span class="go">            1</span>
<span class="go">        ],</span>
<span class="go">   ...</span>
<span class="go">}</span>
</pre></div>
</div>
<p>The energy range defined</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Energy min </span><span class="si">{}</span><span class="s2"> eV&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">energy_min</span><span class="p">))</span>
<span class="go">Energy min 0.001 eV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Energy max </span><span class="si">{}</span><span class="s2"> eV&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">energy_max</span><span class="p">))</span>
<span class="go">Energy max 300 eV</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Energy step </span><span class="si">{}</span><span class="s2"> eV&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">energy_step</span><span class="p">))</span>
<span class="go">Energy step 10 eV</span>
</pre></div>
</div>
<p>During the initialization process, the following things take place behind the scene
- the number of atoms per cm3 of each element is calculated
- the density of each layer (if not provided is estimated)
- the arrays of Sigma (barns) vs Energy for each isotope is retrieved</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">stack_sigma</span><span class="p">)</span>
<span class="go">{&#39;CoAg&#39;: {&#39;Ag&#39;: {&#39;107-Ag&#39;: {&#39;energy_eV&#39;: array([  1.00000000e-05,   1.03401821e+01,   2.06803541e+01,</span>
<span class="go">         ...</span>
<span class="go">         2.79184656e+02,   2.89524828e+02,   2.99865000e+02]),</span>
<span class="go">                            &#39;sigma_b&#39;: array([ 1938.91      ,     6.69765395,     6.9742027 ,     5.28153402,</span>
<span class="go">         ...</span>
<span class="go">         4.73100823,     4.11286   ])},</span>
<span class="go">                 &#39;109-Ag&#39;: {&#39;energy_eV&#39;: array([  1.00000000e-05,   1.03446648e+01,   2.06893197e+01,</span>
<span class="go">         ...</span>
<span class="go">         2.79305690e+02,   2.89650345e+02,   2.99995000e+02]),</span>
<span class="go">                            &#39;sigma_b&#39;: array([  4.51167000e+03,   1.19932847e+01,   5.51138934e+00,</span>
<span class="go">         ...</span>
<span class="go">         4.32864623e+00,   1.19208304e+01,   5.41247000e+00])},</span>
<span class="go">                 &#39;energy_ev&#39;: array([  1.00000000e-05,   1.03424234e+01,   2.06848369e+01,</span>
<span class="go">         ...</span>
<span class="go">         2.79245173e+02,   2.89587587e+02,   2.99930000e+02]),</span>
<span class="go">                 &#39;sigma&#39;: array([ 3177.9769436 ,     9.24808268,     6.26969716,    64.29044465,</span>
<span class="go">         ...</span>
<span class="go">         8.19369849,     4.73876517])},</span>
</pre></div>
</div>
<blockquote>
<div><p>…</p>
<blockquote>
<div>}}}</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="modify-isotopic-ratio">
<h2>Modify Isotopic Ratio<a class="headerlink" href="#modify-isotopic-ratio" title="Permalink to this headline">¶</a></h2>
<p>Let’s presume that the U layer of our sample does not have the default isotopic_ratio reported</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">U-233</span> <span class="pre">-&gt;</span> <span class="pre">0</span>
<span class="pre">U-234</span> <span class="pre">-&gt;</span> <span class="pre">5.5e-5</span>
<span class="pre">U-235</span> <span class="pre">-&gt;</span> <span class="pre">0.007</span>
<span class="pre">U-238</span> <span class="pre">-&gt;</span> <span class="pre">0.99</span>
<span class="pre">`</span></code></p>
<p>but instead</p>
<p><code class="docutils literal"><span class="pre">`</span>
<span class="pre">U-233</span> <span class="pre">-&gt;</span> <span class="pre">0</span>
<span class="pre">U-234</span> <span class="pre">-&gt;</span> <span class="pre">0</span>
<span class="pre">U-235</span> <span class="pre">-&gt;</span> <span class="pre">0.15</span>
<span class="pre">U-238</span> <span class="pre">-&gt;</span> <span class="pre">085</span>
<span class="pre">`</span></code></p>
<div class="section" id="display-current-isotopic-ratio">
<h3>Display current isotopic ratio<a class="headerlink" href="#display-current-isotopic-ratio" title="Permalink to this headline">¶</a></h3>
<p>It’s possible to display the current list of isotopic ratio</p>
<p>To display the entire list</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">get_isotopic_ratio</span><span class="p">())</span>
<span class="go">{&#39;CoAg&#39;: {&#39;Ag&#39;: {&#39;107-Ag&#39;: 0.51839, &#39;109-Ag&#39;: 0.48161000000000004},</span>
<span class="go">          &#39;Co&#39;: {&#39;58-Co&#39;: 0.0, &#39;59-Co&#39;: 1.0}},</span>
<span class="go"> &#39;U&#39;: {&#39;U&#39;: {&#39;233-U&#39;: 0.0,</span>
<span class="go">             &#39;234-U&#39;: 5.4999999999999995e-05,</span>
<span class="go">             &#39;235-U&#39;: 0.0072,</span>
<span class="go">             &#39;238-U&#39;: 0.992745}}}</span>
</pre></div>
</div>
<p>From there, it’s possible to narrow down the search to the compound and element we are looking for</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">get_isotopic_ratio</span><span class="p">(</span><span class="n">compound</span><span class="o">=</span><span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s1">&#39;U&#39;</span><span class="p">))</span>
<span class="go">{&#39;233-U&#39;: 0.0,</span>
<span class="go"> &#39;234-U&#39;: 5.4999999999999995e-05,</span>
<span class="go"> &#39;235-U&#39;: 0.0072,</span>
<span class="go"> &#39;238-U&#39;: 0.992745}</span>
</pre></div>
</div>
<p>if compound is composed of only 1 element, <strong>element</strong> paremeter can be omitted
&gt;&gt;&gt; pprint.pprint(o_reso.get_isotopic_ratio(compound=’U’))
{‘233-U’: 0.0,</p>
<blockquote>
<div>‘234-U’: 5.4999999999999995e-05,
‘235-U’: 0.0072,
‘238-U’: 0.992745}</div></blockquote>
</div>
<div class="section" id="define-new-set-of-isotopic-ratio">
<h3>Define new set of isotopic ratio<a class="headerlink" href="#define-new-set-of-isotopic-ratio" title="Permalink to this headline">¶</a></h3>
<p>Let’s presume our new set of ‘U’ ratio is</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_list_ratio</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]</span>
</pre></div>
</div>
<p>Let’s define the new stochiomettric ratio</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span><span class="o">.</span><span class="n">set_isotopic_ratio</span><span class="p">(</span><span class="n">compound</span><span class="o">=</span><span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="n">list_ratio</span><span class="o">=</span><span class="n">new_list_ratio</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">stack</span><span class="p">)</span>
<span class="go">{&#39;CoAg&#39;: {&#39;Ag&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 10.5},</span>
<span class="go">                 &#39;isotopes&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;,</span>
<span class="go">                                          &#39;value&#39;: [10.406250187729098,</span>
<span class="go">                                                    10.600899412431097]},</span>
<span class="go">                              &#39;file_names&#39;: [&#39;Ag-107.csv&#39;, &#39;Ag-109.csv&#39;],</span>
<span class="go">                              &#39;isotopic_ratio&#39;: [0.51839, 0.48161000000000004],</span>
<span class="go">                              &#39;list&#39;: [&#39;107-Ag&#39;, &#39;109-Ag&#39;],</span>
<span class="go">                              &#39;mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;,</span>
<span class="go">                                       &#39;value&#39;: [106.905093, 108.904756]}},</span>
<span class="go">                 &#39;molar_mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;, &#39;value&#39;: 107.8682}},</span>
<span class="go">          &#39;Co&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 8.9},</span>
<span class="go">                 &#39;isotopes&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;,</span>
<span class="go">                                          &#39;value&#39;: [8.749367803547068,</span>
<span class="go">                                                    8.900000030203689]},</span>
<span class="go">                              &#39;file_names&#39;: [&#39;Co-58.csv&#39;, &#39;Co-59.csv&#39;],</span>
<span class="go">                              &#39;isotopic_ratio&#39;: [0.0, 1.0],</span>
<span class="go">                              &#39;list&#39;: [&#39;58-Co&#39;, &#39;59-Co&#39;],</span>
<span class="go">                              &#39;mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;,</span>
<span class="go">                                       &#39;value&#39;: [57.9357576, 58.9332002]}},</span>
<span class="go">                 &#39;molar_mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;, &#39;value&#39;: 58.9332}},</span>
<span class="go">          &#39;atoms_per_cm3&#39;: {&#39;Ag&#39;: 1.8051829472054791e+21,</span>
<span class="go">                            &#39;Co&#39;: 1.8051829472054791e+21},</span>
<span class="go">          &#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 0.5},</span>
<span class="go">          &#39;elements&#39;: [&#39;Co&#39;, &#39;Ag&#39;],</span>
<span class="go">          &#39;stoichiometric_ratio&#39;: [1, 1],</span>
<span class="go">          &#39;thickness&#39;: {&#39;units&#39;: &#39;mm&#39;, &#39;value&#39;: 0.025}},</span>
<span class="go"> &#39;U&#39;: {&#39;U&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 18.680428927650006},</span>
<span class="go">             &#39;isotopes&#39;: {&#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;,</span>
<span class="go">                                      &#39;value&#39;: [18.552792392319066,</span>
<span class="go">                                                18.632509467526443,</span>
<span class="go">                                                18.712358690988417,</span>
<span class="go">                                                18.951741325328925]},</span>
<span class="go">                          &#39;file_names&#39;: [&#39;U-233.csv&#39;,</span>
<span class="go">                                         &#39;U-234.csv&#39;,</span>
<span class="go">                                         &#39;U-235.csv&#39;,</span>
<span class="go">                                         &#39;U-238.csv&#39;],</span>
<span class="go">                          &#39;isotopic_ratio&#39;: [0.2, 0.3, 0.4, 0.1],</span>
<span class="go">                          &#39;list&#39;: [&#39;233-U&#39;, &#39;234-U&#39;, &#39;235-U&#39;, &#39;238-U&#39;],</span>
<span class="go">                          &#39;mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;,</span>
<span class="go">                                   &#39;value&#39;: [233.039628,</span>
<span class="go">                                             234.0409456,</span>
<span class="go">                                             235.0439231,</span>
<span class="go">                                             238.0507826]}},</span>
<span class="go">             &#39;molar_mass&#39;: {&#39;units&#39;: &#39;g/mol&#39;, &#39;value&#39;: 234.64285678}},</span>
<span class="go">       &#39;atoms_per_cm3&#39;: {&#39;U&#39;: 4.7943575106128917e+22},</span>
<span class="go">       &#39;density&#39;: {&#39;units&#39;: &#39;g/cm3&#39;, &#39;value&#39;: 18.949999999999999},</span>
<span class="go">       &#39;elements&#39;: [&#39;U&#39;],</span>
<span class="go">       &#39;stoichiometric_ratio&#39;: [1],</span>
<span class="go">       &#39;thickness&#39;: {&#39;units&#39;: &#39;mm&#39;, &#39;value&#39;: 0.3}}}</span>
</pre></div>
</div>
<p>As you can see, the <strong>density</strong> and <strong>molar_mass</strong> values of the <em>U</em> compound/element have been updated.</p>
<p>Let’s assume that the <strong>Ag</strong> element is not perfect and has some voids that changes its density to 8.5 (instead of 10.5).
We need to change this value.</p>
<p>First, we can have the current density value for this element</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">get_density</span><span class="p">(</span><span class="n">compound</span><span class="o">=</span><span class="s1">&#39;CoAg&#39;</span><span class="p">,</span> <span class="n">element</span><span class="o">=</span><span class="s1">&#39;Co&#39;</span><span class="p">))</span>
<span class="go">10.5</span>
</pre></div>
</div>
<p>or of all the compounds</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">get_density</span><span class="p">())</span>
<span class="go">{&#39;CoAg&#39;: {&#39;Ag&#39;: 10.5, &#39;Co&#39;: 8.9}, &#39;U&#39;: {&#39;U&#39;: 18.680428927650006}}</span>
</pre></div>
</div>
</div>
<div class="section" id="retrieve-the-transmission-and-attenuation-signals">
<h3>Retrieve the Transmission and Attenuation signals<a class="headerlink" href="#retrieve-the-transmission-and-attenuation-signals" title="Permalink to this headline">¶</a></h3>
<p>Those arrays for each Compound, element and isotopes are calculated during initialization of the object, but also
every time one of the parameters is modified, such as density, stochiometric coefficient.</p>
<p>Those arrays are store in the <strong>stack_signal</strong> dictionary</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">)</span>
<span class="go">{&#39;CoAg&#39;: {&#39;Ag&#39;: {&#39;107-Ag&#39;: {&#39;attenuation&#39;: array([  8.71204643e-03,   3.02257699e-05,   3.14737842e-05,</span>
<span class="go">        ...</span>
<span class="go">         2.29850072e-05,   2.13506105e-05,   1.85609896e-05]),</span>
<span class="go">                            &#39;energy_eV&#39;: array([  1.00000000e-05,   1.03401821e+01,   2.06803541e+01,</span>
<span class="go">         ...</span>
<span class="go">         2.79184656e+02,   2.89524828e+02,   2.99865000e+02]),</span>
<span class="go">                            &#39;transmission&#39;: array([ 0.99128795,  0.99996977,  0.99996853,  0.99997616,  0.99823286,</span>
<span class="go">         ...</span>
<span class="go">         0.99997299,  0.99997427,  0.99997701,  0.99997865,  0.99998144])},</span>
<span class="go">                 &#39;109-Ag&#39;: {&#39;attenuation&#39;: array([  2.01550894e-02,   5.41237178e-05,   2.48723558e-05,</span>
<span class="go">         ...</span>
<span class="go">         1.95348051e-05,   5.37967523e-05,   2.44259480e-05]),</span>
<span class="go">         ...</span>
<span class="go">         ...</span>
<span class="go">         }}}}</span>
</pre></div>
</div>
<p>You can retrieve any of those arrays, transmission, attenuation and Energy (eV) (x-axis) arrays as followed</p>
<p>for the compound CoAg</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transmission_CoAg</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">][</span><span class="s1">&#39;transmission&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">energy_CoAg</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">][</span><span class="s1">&#39;energy_eV&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>for the element Ag</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transmission_CoAg_Ag</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">][</span><span class="s1">&#39;Ag&#39;</span><span class="p">][</span><span class="s1">&#39;transmission&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">energy_CoAg_Ag</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">][</span><span class="s1">&#39;Ag&#39;</span><span class="p">][</span><span class="s1">&#39;energy_eV&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>or for the isotope 107-Ag</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transmission_CoAg_Ag_107Ag</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">][</span><span class="s1">&#39;Ag&#39;</span><span class="p">][</span><span class="s1">&#39;107-Ag&#39;</span><span class="p">][</span><span class="s1">&#39;transmission&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">energy_CoAg_Ag_107Ag</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">][</span><span class="s1">&#39;Ag&#39;</span><span class="p">][</span><span class="s1">&#39;107-Ag&#39;</span><span class="p">][</span><span class="s1">&#39;energy_eV&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>In case you prefer having the x_axis in <em>Angstroms</em> instead of <em>eV</em>
&gt;&gt;&gt; x_axis_ev = energy_CoAg_Ag_107Ag
&gt;&gt;&gt; lambda_CoAg_Ag_107Ag = o_reso.convert_x_axis(array=x_axis_ev, from_units=’ev’, to_units=’angstroms’)</p>
</div>
</div>
<div class="section" id="display-transmission-and-attenuation">
<h2>Display Transmission and Attenuation<a class="headerlink" href="#display-transmission-and-attenuation" title="Permalink to this headline">¶</a></h2>
<p>Here are the flags available for the final plot (in bold, the default values)</p>
<blockquote>
<div><ul class="simple">
<li>transmission: True or False. If False, the attenuation signal is plotted</li>
<li>x_axis: ‘energy’ or ‘lambda’</li>
<li>mixed: True or False. Display the total signal</li>
<li>all_layers: True or False. Dislay the signal of each compound/layer</li>
<li>all_elements: True or False. Display the signal of each element</li>
<li>all_isotopes: True or False. Display the signal of each isotope</li>
<li>items_to_plot: Array that defines what to plot. You need to define the path to the compound/element/isotope you want to see.</li>
</ul>
</div></blockquote>
<p>example:</p>
<p>if we want to display the Co element of the CoAg Compound</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">items_to_plot</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">,</span><span class="s1">&#39;Co&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>if we want also to display the 107-Ag isotope of the element Al of compound CoAg</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">items_to_plot</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">,</span> <span class="s1">&#39;Co&#39;</span><span class="p">],[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">,</span><span class="s1">&#39;Ag&#39;</span><span class="p">,</span><span class="s1">&#39;107-Ag&#39;</span><span class="p">]]</span>
</pre></div>
</div>
<p>So here are a few examples of plot commands</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span> <span class="n">all_layers</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">transmission</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">items_to_plot</span><span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">,</span> <span class="s1">&#39;Co&#39;</span><span class="p">],[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">,</span><span class="s1">&#39;Ag&#39;</span><span class="p">,</span><span class="s1">&#39;107-Ag&#39;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o_reso</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">items_to_plot</span><span class="o">=</span><span class="p">[[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">,</span><span class="s1">&#39;Co&#39;</span><span class="p">]])</span>
</pre></div>
</div>
<img alt="typical attenuation plot" class="align-center" src="_images/plot1.png" />
</div>
<div class="section" id="x-axis-unit-convertor">
<h2>x-axis unit convertor<a class="headerlink" href="#x-axis-unit-convertor" title="Permalink to this headline">¶</a></h2>
<p>This library also provides a energy/lambda/time_of_flight convertor, used here to change the x-axis of the plot.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">energy_ev</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">stack_signal</span><span class="p">[</span><span class="s1">&#39;CoAg&#39;</span><span class="p">][</span><span class="s1">&#39;Ag&#39;</span><span class="p">][</span><span class="s1">&#39;107-Ag&#39;</span><span class="p">][</span><span class="s1">&#39;energy_eV&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">energy_angstroms</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">convert_x_axis</span><span class="p">(</span><span class="n">array</span><span class="o">=</span><span class="n">energy_ev</span><span class="p">,</span> <span class="n">from_units</span><span class="o">=</span><span class="s1">&#39;ev&#39;</span><span class="p">,</span> <span class="n">to_units</span><span class="o">=</span><span class="s1">&#39;angstroms&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>to convert to time_of_flight, 2 parameters must be provide, the detector_offset (in s, if any) and the distance source to detector (in m)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">delay_us</span> <span class="o">=</span> <span class="mf">2.99</span>   <span class="c1">#microS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">source_to_detector_m</span> <span class="o">=</span> <span class="mf">15.1</span> <span class="c1">#meters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">energy_tof</span> <span class="o">=</span> <span class="n">o_reso</span><span class="o">.</span><span class="n">convert_x_axis</span><span class="p">(</span><span class="n">array</span><span class="o">=</span><span class="n">energy_ev</span><span class="p">,</span> <span class="n">from_units</span><span class="o">=</span><span class="s1">&#39;ev&#39;</span><span class="p">,</span> <span class="n">to_units</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="n">delay_us</span><span class="o">=</span><span class="n">delay_us</span><span class="p">,</span> <span class="n">source_to_detector_m</span><span class="o">=</span><span class="n">source_to_detector_m</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Yuxuan (Shawn) Zhang, Jean Bilheux.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>